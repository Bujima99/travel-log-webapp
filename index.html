<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<link rel="icon" type="image/png" href="./img/travelicon.png">
  	<title>Travel Log Login</title>
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link href="https://fonts.googleapis.com/css2?family=Jost:wght@500&display=swap" rel="stylesheet">
	 <link rel="stylesheet" href="css/general.css" />
	<script src="./js/general.js"></script>
  	<style>

/* NEW MAINSTYLES*/
body {
  margin: 0;
  color: white;
  background: white;
  font: 600 16px/18px 'Jost', sans-serif;
  display: flex;
  justify-content: center;
  align-items: center;
  min-height: 100vh;

  background-size: cover;
}

*, :after, :before {
  box-sizing: border-box;
}

.login-wrap {
  width: 100%;
  margin: auto;
  max-width: 525px;
  min-height: 60rem;
  position: relative;
	background: url(./img/travellogimg10.png) no-repeat center center fixed;
  box-shadow: 0 12px 15px 0 rgba(0,0,0,.24), 0 17px 50px 0 rgba(0,0,0,.19);
}

.login-html {
  width: 100%;
  height: 100%;
  position: absolute;
  padding: 90px 70px 50px 70px;
  background: rgba(40,57,101,.9);
  border-radius: 10px;
}

.login-html .sign-in-htm,
.login-html .sign-up-htm {
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  position: absolute;
  transform: rotateY(180deg);
  backface-visibility: hidden;
  transition: all .4s linear;
}

.login-html .sign-in,
.login-html .sign-up,
.login-form .group .check {
  display: none;
}

.login-html .tab,
.login-form .group .label,
.login-form .group .button {
  text-transform: uppercase;
}

.login-html .tab {
  font-size: 22px;
  margin-right: 15px;
  padding-bottom: 5px;
  margin: 0 15px 10px 0;
  display: inline-block;
  border-bottom: 2px solid transparent;
  color: #fff;
  cursor: pointer;
}

.login-html .sign-in:checked + .tab,
.login-html .sign-up:checked + .tab {
  color: #fff;
  border-color: #1161ee;
}

.login-form {
  min-height: 345px;
  position: relative;
  perspective: 1000px;
  transform-style: preserve-3d;
}

.login-form .group {
  margin-bottom: 15px;
}

.login-form .group .button {
width: 100%;
  color: #fff;
  display: block;
}

.login-form .group .label,
.login-form .group .input
{
  width: 100%;
  color: black;
  display: block;
}

.login-form .group .input,
.login-form .group .button {
  border: none;
  padding: 15px 20px;
  border-radius: 25px;
  
}

.login-form .group .label {
  color: #fff;
  font-size: 12px;
  margin-bottom: 8px;
}

.login-form .group .button {
  background: #1161ee;
  font-size: 16px;
  font-weight: bold;
  cursor: pointer;
  transition: all 0.3s;
}

.login-form .group .button:hover {
  background: #0d50c5;
}

.hr {
  height: 2px;
  margin: 60px 0 50px 0;
  background: rgba(255,255,255,.2);
}


/* Add these selectors to maintain the tab switching functionality */
.login-html .sign-in:checked + .tab + .sign-up + .tab + .login-form .sign-in-htm {
  transform: rotateY(0);
}

.login-html .sign-up:checked + .tab + .login-form .sign-up-htm {
  transform: rotateY(0);
}

/* Update the password toggle positioning */
.password-container {
  position: relative;
}


/* Ensure validation messages are visible */
.validation-message {
  color: #ff4444;
  font-size: 0.8em;
  margin-top: 5px;
  margin-left: 10px;
  display: none;
}

.input.invalid {
  border: 1px solid #ff4444 !important;
}

.input.valid {
  border: 1px solid #00C851 !important;
}

/* MOBILE RESPONSIVENESS */
@media only screen and (max-width: 600px) {
  .login-html {
    padding: 60px 30px 30px 30px;
  }
  
  .login-wrap {
    min-height: 55rem;
    width: 90%;
  }
  
  .login-html .tab {
    font-size: 18px;
  }
  
  .login-form .group .input,
  .login-form .group .button {
    padding: 12px 15px;
  }
  
  .hr {
    margin: 40px 0 30px 0;
  }
}

.credit {
  position: fixed;
  bottom: 10px;
  right: 10px;
  font-size: 0.7rem;
  color: #fff;
}

.credit span {
  font-weight: bold;
  color: #1161ee;
}

		.input-group {
  display: flex;
  position: relative;
}

.input-group .input {
  flex: 1;
  padding-right: 60px; /* Make space for button */
}

.password-toggle {
  position: absolute;
  right: 2px;
  top: 2px;
  bottom: 2px;
  background: transparent;
  border: none;
  padding: 0 10px;
  cursor: pointer;
  color: #666;
}

.hide-text {
  display: none;
}

.input[type="text"] + .password-toggle .show-text {
  display: none;
}

.input[type="text"] + .password-toggle .hide-text {
  display: inline;
}


	
  </style>
</head>
<body>
<div class="loader-container" id="loader">
    <div class="loader">
        <svg class="car" width="102" height="40" xmlns="http://www.w3.org/2000/svg">
            <g transform="translate(2 1)" stroke="#002742" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round">
                <path class="car__body" d="M47.293 2.375C52.927.792 54.017.805 54.017.805c2.613-.445 6.838-.337 9.42.237l8.381 1.863c2.59.576 6.164 2.606 7.98 4.531l6.348 6.732 6.245 1.877c3.098.508 5.609 3.431 5.609 6.507v4.206c0 .29-2.536 4.189-5.687 4.189H36.808c-2.655 0-4.34-2.1-3.688-4.67 0 0 3.71-19.944 14.173-23.902zM36.5 15.5h54.01" stroke-width="3"/>
                <ellipse class="car__wheel--left" stroke-width="3.2" fill="#FFF" cx="83.493" cy="30.25" rx="6.922" ry="6.808"/>
                <ellipse class="car__wheel--right" stroke-width="3.2" fill="#FFF" cx="46.511" cy="30.25" rx="6.922" ry="6.808"/>
                <path class="car__line car__line--top" d="M22.5 16.5H2.475" stroke-width="3"/>
                <path class="car__line car__line--middle" d="M20.5 23.5H.4755" stroke-width="3"/>
                <path class="car__line car__line--bottom" d="M25.5 9.5h-19" stroke-width="3"/>
            </g>
        </svg>
    </div>
</div>


<div class="login-wrap">
  <div class="login-html">
    <input id="tab-1" type="radio" name="tab" class="sign-in" checked><label for="tab-1" class="tab">Login</label>
    <input id="tab-2" type="radio" name="tab" class="sign-up"><label for="tab-2" class="tab">Sign Up</label>
    
    <div class="login-form">
      <!-- LOGIN FORM -->
      <div class="sign-in-htm">
        <form id="loginForm">
          <div class="group">
            <label for="usernameInput" class="label">Username</label>
            <input id="usernameInput" type="text" class="input" placeholder="Enter your username" required>
            <div id="usernameInputError" class="validation-message"></div>
          </div>
          
          <div class="group password-container">
            <label for="passwordInput" class="label">Password</label>
	<div class="input-group">
            <input id="passwordInput" type="password" class="input" data-type="password" placeholder="Enter your password" required>
           <button type="button" class="password-toggle" aria-label="Toggle password visibility">
    <span class="show-text">Show</span>
    <span class="hide-text">Hide</span>
  </button>
	</div>
            <div id="passwordInputError" class="validation-message"></div>
          </div>
          
          <div class="group">
            <button type="button" class="button" onclick="checkClassicLogin()">Login</button>
          </div>
          
         
        </form>
      </div>
      
      <!-- SIGNUP FORM -->
      <div class="sign-up-htm">
        <form id="signupForm">
          <div class="group">
            <label for="signupFirstName" class="label">First Name</label>
            <input id="signupFirstName" type="text" class="input" placeholder="Enter your first name" required>
            <div id="signupFirstNameError" class="validation-message"></div>
          </div>
          
          <div class="group">
            <label for="signupLastName" class="label">Last Name</label>
            <input id="signupLastName" type="text" class="input" placeholder="Enter your last name" required>
            <div id="signupLastNameError" class="validation-message"></div>
          </div>
          
          <div class="group">
            <label for="signupPhone" class="label">Phone Number</label>
            <input id="signupPhone" type="text" class="input" placeholder="+91..." required>
            <div id="signupPhoneError" class="validation-message"></div>
          </div>
          
          <div class="group">
            <label for="signupUsername" class="label">Username</label>
            <input id="signupUsername" type="text" class="input" placeholder="Choose a username" required>
            <div id="signupUsernameError" class="validation-message"></div>
          </div>
          
          <div class="group password-container">
            <label for="signupPassword" class="label">Password</label>
		  		 <div class="input-group">
            <input id="signupPassword" type="password" class="input" data-type="password" placeholder="Create a password" required>

            <button type="button" class="password-toggle" aria-label="Toggle password visibility">
    <span class="show-text">Show</span>
    <span class="hide-text">Hide</span>
  </button>
</div>
            <div id="signupPasswordError" class="validation-message"></div>
          </div>
          
          <div class="group password-container">
            <label for="signupConfirmPassword" class="label">Confirm Password</label>
		  		<div class="input-group">
            <input id="signupConfirmPassword" type="password" class="input" data-type="password" placeholder="Confirm your password" required>
            <button type="button" class="password-toggle" aria-label="Toggle password visibility">
    <span class="show-text">Show</span>
    <span class="hide-text">Hide</span>
  </button>
</div>
            <div id="signupConfirmPasswordError" class="validation-message"></div>
          </div>
          
          <div class="group">
            <button type="button" class="button" onclick="signupUser()">Sign Up</button>
          </div>
          
        </form>
      </div>
    </div>
  </div>
</div>


<div class="popup-overlay" id="customPopup">
  <div class="popup-container">
    <div class="popup-close" id="popupClose">&times;</div>
    <h3 class="popup-title" id="popupTitle">Message</h3>
    <div class="popup-message" id="popupMessage"></div>
    <div class="popup-buttons">
      <button class="popup-button" id="popupOk">OK</button>
    </div>
  </div>
</div>

	<div class="credit">
  <p>A project by <span>R Sukrudha Ram</span></p>
</div>
	
  <script src="./js/app.js"></script>
	<!-- NEW SCRIPT FOR PASSWORD TOGGLE -->
  <script>


// Add this to your existing JavaScript
document.addEventListener('DOMContentLoaded', function() {

	// Check session on page load
    const sessionDriverData = checkSession();
    
    if (!sessionDriverData) {
        window.location.href = "index.html";
        return;
    }
    
    // Session is valid, continue loading the page
    // You can also update the UI with the user's data
    document.getElementById('driverName').textContent = sessionDriverData.name;
    
    // Set up a timer to check session periodically
    setInterval(() => {
        if (!checkSession()) {
            alert('Your session has expired. Please log in again.');
            window.location.href = "index.html";
        }
    }, 60000);
	
const toggles = document.querySelectorAll('.password-toggle');
  
  toggles.forEach(toggle => {
    toggle.addEventListener('click', function() {
      const input = this.previousElementSibling;
      const type = input.getAttribute('type') === 'password' ? 'text' : 'password';
      input.setAttribute('type', type);
    });
  });
	
	// Signup form validation
  document.getElementById('signupFirstName').addEventListener('input', function() {
    validateName(this.value, 'signupFirstName');
  });
  
  document.getElementById('signupLastName').addEventListener('input', function() {
    validateName(this.value, 'signupLastName');
  });
  
  document.getElementById('signupPhone').addEventListener('input', function() {
    validatePhone(this.value, 'signupPhone');
  });

document.getElementById('usernameInput').addEventListener('input', function() {
    validateUsername(this.value, 'usernameInput');
  });

document.getElementById('signupUsername').addEventListener('input', function() {
    validateUsername(this.value, 'signupUsername');
  });
  
  document.getElementById('signupPassword').addEventListener('input', function() {
    validatePassword(this.value, 'signupPassword');
    // Also validate confirm password when password changes
    const confirmPassword = document.getElementById('signupConfirmPassword').value;
    if (confirmPassword) {
      validateConfirmPassword(this.value, confirmPassword, 'signupConfirmPassword');
    }
  });
  
  document.getElementById('signupConfirmPassword').addEventListener('input', function() {
    const password = document.getElementById('signupPassword').value;
    validateConfirmPassword(password, this.value, 'signupConfirmPassword');
  });
  
  // Login form validation
  document.getElementById('passwordInput').addEventListener('input', function() {
    if (!this.value) {
      showError('passwordInput', 'This field is required');
    } else {
      showSuccess('passwordInput');
    }
  });
});
	  
    function togglePassword(inputId) {
      const input = document.getElementById(inputId);
      const toggle = event.currentTarget;
      
      if (input.type === "password") {
        input.type = "text";
        toggle.textContent = "👁️‍🗨️";
      } else {
        input.type = "password";
        toggle.textContent = "👁️";
      }
    }

function validateUsername(username, fieldId) {
  const errorElement = document.getElementById(`${fieldId}Error`);
  
  if (!username || username.trim() === '') {
    showError(fieldId, 'Username is required');
    return false;
  }
  
  // You can add additional username validation rules here if needed
  // For example, minimum length or allowed characters
  if (username.length < 4) {
    showError(fieldId, 'Username must be at least 4 characters');
    return false;
  }
  
  showSuccess(fieldId);
  return true;
}
	  
function validateName(name, fieldId) {
  const nameRegex = /^[A-Za-z]+$/;
  const errorElement = document.getElementById(`${fieldId}Error`);
  
  if (!name) {
    showError(fieldId, 'This field is required');
    return false;
  }
  
  if (!nameRegex.test(name)) {
    showError(fieldId, 'Only alphabets are allowed');
    return false;
  }
  
  showSuccess(fieldId);
  return true;
}

function validatePhone(phone, fieldId) {
  const phoneRegex = /^[0-9]{10}$/;
  const errorElement = document.getElementById(`${fieldId}Error`);
  
  if (!phone) {
    showError(fieldId, 'This field is required');
    return false;
  }
  
  if (!phoneRegex.test(phone)) {
    showError(fieldId, 'Please enter a valid 10-digit phone number');
    return false;
  }
  
  showSuccess(fieldId);
  return true;
}

function validatePassword(password, fieldId) {
  const errorElement = document.getElementById(`${fieldId}Error`);
  
  if (!password) {
    showError(fieldId, 'This field is required');
    return false;
  }
  
  if (password.length < 8) {
    showError(fieldId, 'Password must be at least 8 characters');
    return false;
  }
  
  if (!/[A-Z]/.test(password)) {
    showError(fieldId, 'Password must contain at least one uppercase letter');
    return false;
  }
  
  if (!/[a-z]/.test(password)) {
    showError(fieldId, 'Password must contain at least one lowercase letter');
    return false;
  }
  
  if (!/[0-9]/.test(password)) {
    showError(fieldId, 'Password must contain at least one number');
    return false;
  }
  
  if (!/[^A-Za-z0-9]/.test(password)) {
    showError(fieldId, 'Password must contain at least one special character');
    return false;
  }
  
  showSuccess(fieldId);
  return true;
}

function validateConfirmPassword(password, confirmPassword, fieldId) {
  const errorElement = document.getElementById(`${fieldId}Error`);
  
  if (!confirmPassword) {
    showError(fieldId, 'This field is required');
    return false;
  }
  
  if (password !== confirmPassword) {
    showError(fieldId, 'Passwords do not match');
    return false;
  }
  
  showSuccess(fieldId);
  return true;
}

function showError(fieldId, message) {
  const input = document.getElementById(fieldId);
  const errorElement = document.getElementById(`${fieldId}Error`);
  
  input.classList.remove('valid');
  input.classList.add('invalid');
  errorElement.textContent = message;
  errorElement.style.display = 'block';
}

function showSuccess(fieldId) {
  const input = document.getElementById(fieldId);
  const errorElement = document.getElementById(`${fieldId}Error`);
  
  input.classList.remove('invalid');
  input.classList.add('valid');
  errorElement.style.display = 'none';
}
  </script>
  <!-- END OF NEW SCRIPT -->
</body>
</html>
