<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<link rel="icon" type="image/png" href="./img/travelicon.png">
  	<title>Travel Log Login</title>
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link href="https://fonts.googleapis.com/css2?family=Jost:wght@500&display=swap" rel="stylesheet">
	 <link rel="stylesheet" href="css/general.css" />
	<!-- Firebase SDKs -->
  	<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
  	<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
  	<style>

	  
    body{
	margin: 0;
	padding: 0;
	display: flex;
	justify-content: center;
	align-items: center;
	min-height: 100vh;
	font-family: 'Jost', sans-serif;
	background: url(./img/travellogimg10.png) no-repeat center center fixed;
	background-size: cover;
}

		/* NEW CSS FOR PASSWORD TOGGLE */
.password-container {
  position: relative;
  width: 55%;
  margin: 10px 60px;
}

.password-container input {
  width: 100%;
  margin: 0;
  padding-right: 30px; /* Space for the eye icon */
}

.toggle-password {
  position: absolute;
  left: 29vh;
  top: 50%;
  transform: translateY(-50%);
  cursor: pointer;
  color: #666;
  user-select: none;
}

/* END OF NEW CSS */


.main{
	width: 350px;
	height: 500px;
	background-color: #ADD8E6;
	overflow: hidden;
	border-radius: 10px;
	box-shadow: 5px 20px 50px #000;
}
#chk{
	display: none;
}
.signup{
	position: relative;
	width:100%;
	height: 100%;
}
label{
	color: #008ae6;
	font-size: 2.3em;
	justify-content: center;
	display: flex;
	margin: 5px;
	font-weight: bold;
	cursor: pointer;
	transition: .5s ease-in-out;
}
input{
	width: 60%;
	height: 10px;
	background: #e0dede;
	justify-content: center;
	display: flex;
	margin: 10px auto;
	padding: 12px;
	border: none;
	outline: none;
	border-radius: 5px;
}
button{
	width: 60%;
	height: 40px;
	margin: 10px auto;
	justify-content: center;
	display: block;
	color: #fff;
	background: #008ae6;
	font-size: 1em;
	font-weight: bold;
	margin-top: 15px;
	outline: none;
	border: none;
	border-radius: 5px;
	transition: .2s ease-in;
	cursor: pointer;
}
button:hover{
	background: #6d44b8;
}
.login{
	height: 460px;
	background: white;
	border-radius: 60% / 10%;
	transform: translateY(-60px);
	transition: .8s ease-in-out;
}
.login label{
	color: #008ae6;
	transform: scale(.6);
}

#chk:checked ~ .login{
	transform: translateY(-455px);
}
#chk:checked ~ .login label{
	transform: scale(1);	
}
#chk:checked ~ .signup label{
	transform: scale(.6);
}

	  /* Mobile responsiveness */
@media only screen and (max-width: 600px) {
  .main {
        width: 100%;
        max-width: 300px;
        height: auto;
        max-height: 630px;
  }
  
  input {
    width: 70%;
    padding: 15px;
    height: 15px;
  }
  
  button {
    width: 80%;
    padding: 12px;
    height: 45px;
    font-size: 1.1em;
  }
  
  label {
    font-size: 2em;
    margin: 15px 5px;
  }
  
  .login {
    height: 450px;
    padding-bottom: 20px;
	transform: translateY(200px);
  }
  
  #chk:checked ~ .login {
    transform: translateY(-42%)
  }

.password-container {
  width: 65%;
  margin: 10px 20px;
}


.toggle-password {
 
  left: 25vh;
}
}

@media only screen and (max-width: 400px) {
  input {
    width: 70%;
  }
  
  button {
    width: 85%;
  }
  
  label {
    font-size: 1.8em;
  }
}

.credit {
  position: fixed;
  bottom: -9px;
  right: 5px;
  font-size: 0.7rem;
  color: #008ae6;
}
.credit span {
  font-weight: bold;
  color: #008ae6;
}

		/* Add this to your existing CSS */
.validation-message {
  color: #ff4444;
  font-size: 0.8em;
  margin-top: -8px;
  margin-bottom: 8px;
  text-align: center;
  display: none;
}

.invalid {
  border: 1px solid #ff4444 !important;
}

.valid {
  border: 1px solid #00C851 !important;
}
		
  </style>
</head>
<body>
<div class="loader-container" id="loader">
<div class="loader"></div>
</div>
    <div class="main">  	
	<input type="checkbox" id="chk" aria-hidden="true">
	    <div class="signup">
		<form id="loginForm">
			<label for="chk" aria-hidden="true">Login</label>
			<input type="text" id="usernameInput" placeholder="Username" required>
			<div id="usernameInputError" class="validation-message"></div>
                     	<div class="password-container">
                        	<input type="password" id="passwordInput" placeholder="Password" required>
                        	<span class="toggle-password" onclick="togglePassword('passwordInput')">üëÅÔ∏è</span>
                     	</div>
			<div id="passwordInputError" class="validation-message"></div>
       			 <button type="button" onclick="checkClassicLogin()">Login</button>
		</form>	
	</div>
	    <div class="login">
				<form  id="signupForm">
					<label for="chk" aria-hidden="true">Sign up</label>
					<input type="text" id="signupFirstName" placeholder="First Name" required>
					<div id="signupFirstNameError" class="validation-message"></div>
					<input type="text" id="signupLastName" placeholder="Last Name" required>
					<div id="signupLastNameError" class="validation-message"></div>
          				<input type="text" id="signupPhone" placeholder="Phone Number (+91...)" required>
					<div id="signupPhoneError" class="validation-message"></div>
					<input type="text" id="signupUsername" placeholder="Username" required>
					<div id="signupUsernameError" class="validation-message"></div>
                     			<div class="password-container">
                        			<input type="password" id="signupPassword" placeholder="Password" required>
                        			<span class="toggle-password" onclick="togglePassword('signupPassword')">üëÅÔ∏è</span>
                     			</div>
					<div id="signupPasswordError" class="validation-message"></div>
                     			<div class="password-container">
                        			<input type="password" id="signupConfirmPassword" placeholder="Confirm Password" required>
                        			<span class="toggle-password" onclick="togglePassword('signupConfirmPassword')">üëÅÔ∏è</span>
                     			</div>
					<div id="signupConfirmPasswordError" class="validation-message"></div>
					<button type="button" onclick="signupUser()">Sign up</button>	
				</form>
	    
			</div>
	</div>
  


<div class="popup-overlay" id="customPopup">
  <div class="popup-container">
    <div class="popup-close" id="popupClose">&times;</div>
    <h3 class="popup-title" id="popupTitle">Message</h3>
    <div class="popup-message" id="popupMessage"></div>
    <div class="popup-buttons">
      <button class="popup-button" id="popupOk">OK</button>
    </div>
  </div>
</div>

	<div class="credit">
  <p>A project by <span>R Sukrudha Ram</span></p>
</div>
	
  <script src="./js/app.js"></script>
	<!-- NEW SCRIPT FOR PASSWORD TOGGLE -->
  <script>

// Add this to your existing JavaScript
document.addEventListener('DOMContentLoaded', function() {
  // Signup form validation
  document.getElementById('signupFirstName').addEventListener('input', function() {
    validateName(this.value, 'signupFirstName');
  });
  
  document.getElementById('signupLastName').addEventListener('input', function() {
    validateName(this.value, 'signupLastName');
  });
  
  document.getElementById('signupPhone').addEventListener('input', function() {
    validatePhone(this.value, 'signupPhone');
  });

document.getElementById('usernameInput').addEventListener('input', function() {
    validateUsername(this.value, 'usernameInput');
  });

document.getElementById('signupUsername').addEventListener('input', function() {
    validateUsername(this.value, 'signupUsername');
  });
  
  document.getElementById('signupPassword').addEventListener('input', function() {
    validatePassword(this.value, 'signupPassword');
    // Also validate confirm password when password changes
    const confirmPassword = document.getElementById('signupConfirmPassword').value;
    if (confirmPassword) {
      validateConfirmPassword(this.value, confirmPassword, 'signupConfirmPassword');
    }
  });
  
  document.getElementById('signupConfirmPassword').addEventListener('input', function() {
    const password = document.getElementById('signupPassword').value;
    validateConfirmPassword(password, this.value, 'signupConfirmPassword');
  });
  
  // Login form validation
  document.getElementById('passwordInput').addEventListener('input', function() {
    if (!this.value) {
      showError('passwordInput', 'This field is required');
    } else {
      showSuccess('passwordInput');
    }
  });
});
	  
    function togglePassword(inputId) {
      const input = document.getElementById(inputId);
      const toggle = event.currentTarget;
      
      if (input.type === "password") {
        input.type = "text";
        toggle.textContent = "üëÅÔ∏è‚Äçüó®Ô∏è";
      } else {
        input.type = "password";
        toggle.textContent = "üëÅÔ∏è";
      }
    }

function validateUsername(username, fieldId) {
  const errorElement = document.getElementById(`${fieldId}Error`);
  
  if (!username || username.trim() === '') {
    showError(fieldId, 'Username is required');
    return false;
  }
  
  // You can add additional username validation rules here if needed
  // For example, minimum length or allowed characters
  if (username.length < 4) {
    showError(fieldId, 'Username must be at least 4 characters');
    return false;
  }
  
  showSuccess(fieldId);
  return true;
}
	  
function validateName(name, fieldId) {
  const nameRegex = /^[A-Za-z]+$/;
  const errorElement = document.getElementById(`${fieldId}Error`);
  
  if (!name) {
    showError(fieldId, 'This field is required');
    return false;
  }
  
  if (!nameRegex.test(name)) {
    showError(fieldId, 'Only alphabets are allowed');
    return false;
  }
  
  showSuccess(fieldId);
  return true;
}

function validatePhone(phone, fieldId) {
  const phoneRegex = /^[0-9]{10}$/;
  const errorElement = document.getElementById(`${fieldId}Error`);
  
  if (!phone) {
    showError(fieldId, 'This field is required');
    return false;
  }
  
  if (!phoneRegex.test(phone)) {
    showError(fieldId, 'Please enter a valid 10-digit phone number');
    return false;
  }
  
  showSuccess(fieldId);
  return true;
}

function validatePassword(password, fieldId) {
  const errorElement = document.getElementById(`${fieldId}Error`);
  
  if (!password) {
    showError(fieldId, 'This field is required');
    return false;
  }
  
  if (password.length < 8) {
    showError(fieldId, 'Password must be at least 8 characters');
    return false;
  }
  
  if (!/[A-Z]/.test(password)) {
    showError(fieldId, 'Password must contain at least one uppercase letter');
    return false;
  }
  
  if (!/[a-z]/.test(password)) {
    showError(fieldId, 'Password must contain at least one lowercase letter');
    return false;
  }
  
  if (!/[0-9]/.test(password)) {
    showError(fieldId, 'Password must contain at least one number');
    return false;
  }
  
  if (!/[^A-Za-z0-9]/.test(password)) {
    showError(fieldId, 'Password must contain at least one special character');
    return false;
  }
  
  showSuccess(fieldId);
  return true;
}

function validateConfirmPassword(password, confirmPassword, fieldId) {
  const errorElement = document.getElementById(`${fieldId}Error`);
  
  if (!confirmPassword) {
    showError(fieldId, 'This field is required');
    return false;
  }
  
  if (password !== confirmPassword) {
    showError(fieldId, 'Passwords do not match');
    return false;
  }
  
  showSuccess(fieldId);
  return true;
}

function showError(fieldId, message) {
  const input = document.getElementById(fieldId);
  const errorElement = document.getElementById(`${fieldId}Error`);
  
  input.classList.remove('valid');
  input.classList.add('invalid');
  errorElement.textContent = message;
  errorElement.style.display = 'block';
}

function showSuccess(fieldId) {
  const input = document.getElementById(fieldId);
  const errorElement = document.getElementById(`${fieldId}Error`);
  
  input.classList.remove('invalid');
  input.classList.add('valid');
  errorElement.style.display = 'none';
}
  </script>
  <!-- END OF NEW SCRIPT -->
</body>
</html>
